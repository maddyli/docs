---
title: "Defining Availability"
description: "This guide explains how to define and find availability information at both the service level and actor level in Medplum using FHIR resources and Medplum's custom . You'll learn how to configure when services can be performed in time, how different scheduling constraints interact, and how to model complex multi-resource scheduling scenarios."
---

## Core Scheduling Concepts[​](#core-scheduling-concepts "Direct link to Core Scheduling Concepts")

### Key FHIR Resources[​](#key-fhir-resources "Direct link to Key FHIR Resources")

The following FHIR resources work together to define availability:

| Resource                                                            | Purpose                                                                              |
| ------------------------------------------------------------------- | ------------------------------------------------------------------------------------ |
| [`ActivityDefinition`](/docs/api/fhir/resources/activitydefinition) | Defines appointment types and their default constraints                              |
| [`Schedule`](/docs/api/fhir/resources/schedule)                     | Represents a provider/room/device's availability                                     |
| [`Slot`](/docs/api/fhir/resources/slot)                             | Represents specific time blocks (created on-demand at booking or for unavailability) |
| [`Appointment`](/docs/api/fhir/resources/appointment)               | Represents a booked appointment                                                      |

The other key entity is the **Service Type**, which is a [codeable concept](/docs/api/fhir/datatypes/codeableconcept) that defines a specific service type (appointment type). Service types are used to group appointments into categories, such as `office visit`, `telephone visit`, and `emergency room visit`. FHIR's recommendation is to use codes from [https://build.fhir.org/valueset-procedure-code.html](https://build.fhir.org/valueset-procedure-code.html).

### Appointment Booking FHIR Operations[​](#appointment-booking-fhir-operations "Direct link to Appointment Booking FHIR Operations")

* `$find` - Find available appointment slots **\[Alpha - January 2026]**

<Info>
  The `$find` operation is currently in alpha. It currently supports only a single Schedule, and does not use `ActivityDefinition` default service type parameters yet.
</Info>

* `$hold` - Temporarily hold a slot **\[In Development - Coming Soon]**
* `$book` - Book an appointment **\[In Development - Coming Soon]**
* `$cancel` - Cancel an appointment **\[In Development - Coming Soon]**

### Resource Relationships[​](#resource-relationships "Direct link to Resource Relationships")

The diagram below illustrates how these resources work together. The key takeaways are:

* Each [Practitioner](/docs/api/fhir/resources/practitioner), [Location](/docs/api/fhir/resources/location), or [Device](/docs/api/fhir/resources/device) has **one** [`Schedule`](/docs/api/fhir/resources/schedule)
* An [ActivityDefinition](/docs/api/fhir/resources/activitydefinition) defines default scheduling parameters for a specific service type
* Multiple Practitioners can reference the same ActivityDefinition through their `Schedule.serviceType`, allowing shared defaults across providers
* [Slot](/docs/api/fhir/resources/slot) resources **only** represent time that is explicitly blocked (either by booked appointments or unavailability)

<Note>
  This model expects a **one-to-one relationship** between actors and Schedules. While FHIR's `Schedule.actor` field allows multiple actor references (min: 1, max: \*), Medplum's scheduling system is designed around the pattern where each Schedule has a single actor reference. This simplifies availability management and aligns with common scheduling workflows where each Practitioner, Location, or Device maintains its own independent schedule.
</Note>

The system supports two levels of configuration:

* **[Actor-level defined availability](#actor-level-availability)**: Defined directly on a Practitioner's or Location's [`Schedule`](/docs/api/fhir/resources/schedule) using the `SchedulingParameters` extension
* **[Service type-level defined availability](#service-level-availability)**: Defined on [`ActivityDefinition`](/docs/api/fhir/resources/activitydefinition) and referenced by matching `Schedule.serviceType` codes

### The Scheduling Parameters Extension[​](#the-scheduling-parameters-extension "Direct link to The Scheduling Parameters Extension")

All scheduling constraints are managed through a single consolidated extension: `SchedulingParameters`. This extension can appear on both [ActivityDefinition](/docs/api/fhir/resources/activitydefinition) (for defaults) and [Schedule](/docs/api/fhir/resources/schedule).

#### Extension Fields Reference[​](#extension-fields-reference "Direct link to Extension Fields Reference")

| Url                 | Type                                                        | Applies To                           | Required                                        | Behavior when defined                                                                                                                                                                | Behavior when not defined                                                              |
| ------------------- | ----------------------------------------------------------- | ------------------------------------ | ----------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------- |
| `serviceType`       | [CodeableConcept](/docs/api/fhir/datatypes/codeableconcept) | Schedule only                        | Optional                                        | Applies configuration only to the specified service type, overriding defaults for that service                                                                                       | Values apply as the default for all services                                           |
| `availability`      | [Timing](/docs/api/fhir/datatypes/timing)                   | Schedule only                        | Optional                                        | Bookings must fully fit within the recurring windows                                                                                                                                 | Time is implicitly available by default (unless blocked by Slots or other constraints) |
| `timezone`          | Code                                                        | Schedule only                        | Optional                                        | Specifies the timezone (IANA timezone identifier, e.g., `America/New_York`) for interpreting the `availability` timing. Falls back to the Schedule's actor timezone if not specified | Uses the timezone defined on the Schedule's actor reference                            |
| `duration`          | [Duration](/docs/api/fhir/datatypes/duration)               | Both Schedule and ActivityDefinition | Required                                        | Determines how long the time increments for a Slot are                                                                                                                               | N/A - must be specified                                                                |
| `bufferBefore`      | [Duration](/docs/api/fhir/datatypes/duration)               | Both Schedule and ActivityDefinition | Optional                                        | Requires prep time before start to also be free                                                                                                                                      | No prep time required                                                                  |
| `bufferAfter`       | [Duration](/docs/api/fhir/datatypes/duration)               | Both Schedule and ActivityDefinition | Optional                                        | Requires cleanup time after end to also be free                                                                                                                                      | No cleanup time required                                                               |
| `alignmentInterval` | [Duration](/docs/api/fhir/datatypes/duration)               | Both Schedule and ActivityDefinition | Optional                                        | Start times must align to the interval (e.g., every 15 minutes)                                                                                                                      | Start times are not constrained by an interval grid                                    |
| `alignmentOffset`   | [Duration](/docs/api/fhir/datatypes/duration)               | Both Schedule and ActivityDefinition | Optional, and alignmentInterval must be defined | Shifts allowed start times by the offset relative to the interval (e.g., with a 15-minute alignmentInterval and a 5-minute alignmentOffset, valid starts are :05, :20, :35, :50)     | Grid anchored to :00 (no shift)                                                        |
| `bookingLimit`      | [Timing](/docs/api/fhir/datatypes/timing)                   | Both Schedule and ActivityDefinition | Optional                                        | Caps number of appointments per period (multiple entries can stack)                                                                                                                  | No capacity cap for that period                                                        |

<Accordion title="Example of the  extension">
  `SchedulingParameters`

  ```
  {  "url": "https://medplum.com/fhir/StructureDefinition/SchedulingParameters",  "extension": [    // Optional: specify service type (omit for default configuration)    {      "url": "serviceType",      "valueCodeableConcept": {        "coding": [{"code": "bariatric-surgery"}]      }    },        // Optional: specify timezone for availability interpretation (Schedule only)    // Falls back to Schedule's actor timezone if not specified    {      "url": "timezone",      "valueCode": "America/Los_Angeles"    },        // Required: duration determines how long the time increments for a Slot are    {      "url": "duration",      "valueDuration": {        "value": 1,        "unit": "h"      }    },        // Recurring availability (Schedule only)    {      "url": "availability",      "valueTiming": {        "repeat": {          "dayOfWeek": ["mon", "wed", "fri"],          "timeOfDay": ["09:00:00"],  // Interpreted in America/Los_Angeles timezone          "duration": 8,          "durationUnit": "h"        }      }    },        // Buffer time before appointment    {      "url": "bufferBefore",      "valueDuration": {        "value": 15,        "unit": "min",        "system": "http://unitsofmeasure.org",        "code": "min"      }    },        // Buffer time after appointment    {      "url": "bufferAfter",      "valueDuration": {        "value": 10,        "unit": "min",        "system": "http://unitsofmeasure.org",        "code": "min"      }    },        // Time alignment interval (appointment start time boundaries)    {      "url": "alignmentInterval",      "valueDuration": {        "value": 15,        "unit": "min",        "system": "http://unitsofmeasure.org",        "code": "min"      }    },        // Time alignment offset (shift from interval boundaries)    {      "url": "alignmentOffset",      "valueDuration": {        "value": 0,        "unit": "min",        "system": "http://unitsofmeasure.org",        "code": "min"      }    },        // Booking limits (can have multiple)    {      "url": "bookingLimit",      "valueTiming": {        "repeat": {          "frequency": 8,          "period": 1,          "periodUnit": "d"        }      }    }  ]}
  ```
</Accordion>

## Actor Level Availability[​](#actor-level-availability "Direct link to Actor Level Availability")

### The Concept of Implicit Availability[​](#the-concept-of-implicit-availability "Direct link to The Concept of Implicit Availability")

Medplum's scheduling model uses **implicit availability**: time is assumed to be free by default. You define availability rules using extensions that specify when resources are available based on recurring patterns. [`Slot`](/docs/api/fhir/resources/slot) resources are only used for explicit overrides—either to mark time as busy (when an appointment is booked) or to block out unavailable time.

This approach avoids the need to pre-generate thousands of Slot resources for every possible time slot. Instead, the system calculates available windows dynamically based on the availability rules you define.

### The Schedule Resource[​](#the-schedule-resource "Direct link to The Schedule Resource")

The [`Schedule`](/docs/api/fhir/resources/schedule) resource is the foundation for defining actor-level availability for a provider, location, or device.

Here is an example of a [Schedule](/docs/api/fhir/resources/schedule) resource that defines general availability for a [Practitioner](/docs/api/fhir/resources/practitioner).

```
{  "resourceType": "Schedule",  "id": "dr-smith-schedule",  "actor": [{"reference": "Practitioner/dr-smith"}],  "extension": [{    "url": "https://medplum.com/fhir/StructureDefinition/SchedulingParameters",    "extension": [      {        "url": "duration",        "valueDuration": {          "value": 1,          "unit": "h"        }      },      {        "url": "availability",        "valueTiming": {          "repeat": {            "dayOfWeek": ["mon", "tue", "wed", "thu", "fri"],            "timeOfDay": ["09:00:00"],            "duration": 8,            "durationUnit": "h"          }        }      }    ]  }]  //...}
```

## Service Level Availability[​](#service-level-availability "Direct link to Service Level Availability")

### Service Types and ActivityDefinition[​](#service-types-and-activitydefinition "Direct link to Service Types and ActivityDefinition")

An [ActivityDefinition](/docs/api/fhir/resources/activitydefinition) gives a mechanism to define the default scheduling parameters for a specific service type (appointment type), which can then be used by multiple [Practitioner](/docs/api/fhir/resources/practitioner)'s [Schedules](/docs/api/fhir/resources/schedule). This allows you to define standard appointment durations, buffer times, alignment intervals, and booking limits once and apply them across multiple providers.

To get the [Schedule](/docs/api/fhir/resources/schedule) to use the [ActivityDefinition](/docs/api/fhir/resources/activitydefinition)'s scheduling parameters, the `Schedule.serviceType` must match the `ActivityDefinition.code`.

```
{  "resourceType": "ActivityDefinition",  "id": "office-visit",  "code": {    "coding": [{      "system": "http://example.org/appointment-types",      "code": "office-visit"  // ← This is the key    }]  },  //...  "extension": [{    "url": "https://medplum.com/fhir/StructureDefinition/SchedulingParameters",    "extension": [      {        "url": "duration",        "valueDuration": {          "value": 1,          "unit": "h"        }      },      {        "url": "availability",        "valueTiming": {          "repeat": {            "dayOfWeek": ["mon", "tue", "wed", "thu", "fri"],            "timeOfDay": ["09:00:00"],            "duration": 8,            "durationUnit": "h"          }        }      }    ]  }]}
```

```
{  "resourceType": "Schedule",  "id": "dr-smith-schedule",  "actor": [{"reference": "Practitioner/dr-smith"}],  //...}
```

### Override Behavior[​](#override-behavior "Direct link to Override Behavior")

A [Practitioner](/docs/api/fhir/resources/practitioner)'s [Schedule](/docs/api/fhir/resources/schedule) can also override the default [ActivityDefinition](/docs/api/fhir/resources/activitydefinition)'s availability for a specific service type by defining a `serviceType` extension.

Here is an example Schedule that defines generic availability for all services and then overrides the availability for a specific service type.

```
{  "resourceType": "Schedule",  "id": "dr-chen-schedule",  "active": true,  "serviceType": [    {"coding": [{"code": "new-patient-visit"}]},    {"coding": [{"code": "follow-up"}]}  ],  "actor": [{"reference": "Practitioner/dr-chen"}],  "extension": [    // Practitioner level availability    {      "url": "https://medplum.com/fhir/StructureDefinition/SchedulingParameters",      "extension": [        {          "url": "duration",          "valueDuration": {            "value": 1,            "unit": "h"          }        },        {          "url": "availability",          "valueTiming": {            "repeat": {              "dayOfWeek": ["mon", "tue", "wed", "thu", "fri"],              "timeOfDay": ["09:00:00"],              "duration": 8,              "durationUnit": "h"            }          }        }      ]    },    // Service type level availability for this Practitioner - overrides any availability parameters specified elsewhere    {      "url": "https://medplum.com/fhir/StructureDefinition/SchedulingParameters",      "extension": [        {          "url": "serviceType",          "valueCodeableConcept": {            "coding": [{"code": "new-patient-visit"}]          }        },        {          "url": "duration",          "valueDuration": {            "value": 1,            "unit": "h"          }        },        {          "url": "availability",          "valueTiming": {            "repeat": {              "dayOfWeek": ["tue", "thu"],              "timeOfDay": ["09:00:00"],              "duration": 4,              "durationUnit": "h"            }          }        }      ]    }  ]}
```

**All-or-nothing rule**: When a `SchedulingParameters` extension includes a `serviceType`, it **completely replaces** the default configuration for that service type. No attribute-level merging occurs.

**Priority order** (highest to lowest):

1. Schedule where `https://medplum.com/fhir/StructureDefinition/SchedulingParameters.serviceType` extension matches `service-type` param on `$find` request.
2. ActivityDefinition where `ActivityDefinition.code` matches `service-type` param on `$find` request. ActivityDefinition parameters are used.
3. Use generic availability defined on the Schedule.

### Blocking Time by Service Type[​](#blocking-time-by-service-type "Direct link to Blocking Time by Service Type")

Here is an example of a [Slot](/docs/api/fhir/resources/slot) resource that blocks time for a specific service type.

```
{  "resourceType": "Slot",  "schedule": {"reference": "Schedule/dr-johnson-schedule"},  "status": "busy-unavailable",  "start": "2025-12-24T08:00:00Z",  "end": "2025-12-27T07:59:59Z",  "comment": "Holiday vacation",  "serviceType": [{"coding": [{"code": "office-visit"}]}]}
```

* **With serviceType**: Blocks only that specific service
* **Without serviceType**: Blocks all services

### Timezone per Scheduling Parameters Entry[​](#timezone-per-scheduling-parameters-entry "Direct link to Timezone per Scheduling Parameters Entry")

The `timezone` parameter allows you to specify different timezones for different service types within the same Schedule. This is useful when a provider needs to define availability in different timezones for different services (e.g., a doctor who provides cardiac surgery where they might travel to in one timezone and call center availability in another timezone).

**Fallback Logic:** If no timezone is specified in the `scheduling-parameters` extension, then the availability will be interpreted in the timezone defined on the Schedule's actor reference (Practitioner, Location, or Device). It looks for the FHIR sanctioned timezone extension:

```
{  "resourceType": "Practitioner",  "id": "dr-smith",  "extension": [    {      "url": "http://hl7.org/fhir/StructureDefinition/timezone",      "valueCode": "America/Los_Angeles"    }  ]}
```

**Timezone Resolution Order:**

1. If `timezone` is specified in the `scheduling-parameters` extension, use that timezone
2. Otherwise, fall back to the timezone defined on the Schedule's actor reference (Practitioner, Location, or Device)

**Important Notes:**

* `timezone` is only available on Schedule resources, not ActivityDefinition
* The timezone value should be an IANA timezone identifier (e.g., `America/New_York`, `America/Los_Angeles`, `America/Miami`)
* When `timezone` is specified, all `timeOfDay` values in the `availability` timing are interpreted in that timezone

Here is an example of a Schedule with multiple service types, each with its own timezone:

```
{  "resourceType": "Schedule",  "id": "dr-smith-schedule",  "actor": [{"reference": "Practitioner/dr-smith"}],  "extension": [    {      "url": "https://medplum.com/fhir/StructureDefinition/SchedulingParameters",      "extension": [        {          "url": "serviceType",          "valueCodeableConcept": {            "coding": [{"code": "cardiac-surgery"}]          }        },        {          "url": "timezone",          "valueCode": "America/Los_Angeles"        },        {          "url": "duration",          "valueDuration": {            "value": 1,            "unit": "h"          }        },        {          "url": "availability",          "valueTiming": {            "repeat": {              "dayOfWeek": ["mon", "tue", "wed"],              "timeOfDay": ["11:00:00"],  // Interpreted in America/Los_Angeles              "duration": 4,              "durationUnit": "h"            }          }        }      ]    },    {      "url": "https://medplum.com/fhir/StructureDefinition/SchedulingParameters",      "extension": [        {          "url": "timezone",          "valueCode": "America/New_York"        },        {          "url": "serviceType",          "valueCodeableConcept": {            "coding": [{"code": "call-center-availability"}]          }        },        {          "url": "duration",          "valueDuration": {            "value": 1,            "unit": "h"          }        },        {          "url": "availability",          "valueTiming": {            "repeat": {              "dayOfWeek": ["mon", "tue", "wed"],              "timeOfDay": ["09:00:00"],  // Interpreted in America/New_York              "duration": 8,              "durationUnit": "h"            }          }        }      ]    }  ]}
```

In this example:

* Cardiac surgery availability is defined in `America/Los_Angeles` timezone (Mon-Wed 11am-3pm America/Los Angeles)
* Call Center availability is defined in `America/New_York` timezone (Mon-Wed 9am-5pm Eastern)
* Each service type's availability times are interpreted independently based on their respective timezones

## Examples[​](#examples "Direct link to Examples")

### Example 1: Simple Primary Care Office with Appointment Type Defaults[​](#example-1-simple-primary-care-office-with-appointment-type-defaults "Direct link to Example 1: Simple Primary Care Office with Appointment Type Defaults")

This example shows how to define availability for a simple primary care office where Practitioner's Schedules inherit default scheduling parameters from an ActivityDefinition.

<Accordion title="ActivityDefinition: Office Visit Defaults">
  This ActivityDefinition defines default scheduling parameters for a 30-minute office visit with 5-minute buffers and 15-minute alignment intervals.

  ```
  {  "resourceType": "ActivityDefinition",  "id": "office-visit",  "status": "active",  "kind": "Appointment",  "code": {    "coding": [{      "system": "http://example.org/appointment-types",      "code": "office-visit",      "display": "Office Visit"    }]  },  "timingDuration": {    "value": 30,    "unit": "min",    "system": "http://unitsofmeasure.org",    "code": "min"  },  "extension": [{    "url": "https://medplum.com/fhir/StructureDefinition/SchedulingParameters",    "extension": [      {        "url": "duration",        "valueDuration": {          "value": 1,          "unit": "h"        }      },      {        "url": "bufferBefore",        "valueDuration": {"value": 5, "unit": "min"}      },      {        "url": "bufferAfter",        "valueDuration": {"value": 5, "unit": "min"}      },      {        "url": "alignmentInterval",        "valueDuration": {"value": 15, "unit": "min"}      },      {        "url": "alignmentOffset",        "valueDuration": {"value": 0, "unit": "min"}      }    ]  }]}
  ```
</Accordion>

<Accordion title="Schedule: Practitioner's Schedule without Overrides">
  This Schedule shows Dr. Johnson's availability (Mon-Fri 9am-5pm) that inherits all default parameters from the ActivityDefinition without any service-specific overrides.

  ```
  {  "resourceType": "Schedule",  "id": "dr-johnson-schedule",  "active": true,  "actor": [{    "reference": "Practitioner/dr-johnson",    "display": "Dr. Sarah Johnson"  }],  "planningHorizon": {    "start": "2025-01-01T00:00:00Z",    "end": "2025-12-31T23:59:59Z"  },  "extension": [{    "url": "https://medplum.com/fhir/StructureDefinition/SchedulingParameters",    "extension": [      {        "url": "duration",        "valueDuration": {          "value": 1,          "unit": "h"        }      },      {        "url": "availability",        "valueTiming": {          "repeat": {            "dayOfWeek": ["mon", "tue", "wed", "thu", "fri"],            "timeOfDay": ["09:00:00"],            "duration": 8,            "durationUnit": "h"          }        }      }    ]  }]}
  ```
</Accordion>

**Result**: Dr. Johnson's schedule inherits all the default parameters from the ActivityDefinition for an office visit:

* $find called with `service-type!=office-visit`: Dr. Johnson is available Mon-Fri 9am-5pm for non-office visits **\[from Schedule]**
* $find called with `service-type=office-visit`: For office visits, available to start every 15 minutes (:00, :15, :30, :45) with 5-minute buffers **\[from ActivityDefinition]**

### Example 2: Multi-Service Provider with Multiple Appointment Types and Overrides[​](#example-2-multi-service-provider-with-multiple-appointment-types-and-overrides "Direct link to Example 2: Multi-Service Provider with Multiple Appointment Types and Overrides")

A provider who offers different appointment types with varying availability and constraints. Overrides the default scheduling parameters for new patient visits.

<Accordion title="ActivityDefinition: New Patient Visit">
  This ActivityDefinition defines a 60-minute new patient visit with 15-minute buffers, 30-minute alignment intervals, and a booking limit of 3 per day.

  ```
  {  "resourceType": "ActivityDefinition",  "id": "new-patient-visit",  "status": "active",  "kind": "Appointment",  "code": {    "coding": [{      "system": "http://example.org/appointment-types",      "code": "new-patient-visit",      "display": "New Patient Visit"    }]  },  "timingDuration": {"value": 60, "unit": "min"},  "extension": [{    "url": "https://medplum.com/fhir/StructureDefinition/SchedulingParameters",    "extension": [      {        "url": "duration",        "valueDuration": {          "value": 1,          "unit": "h"        }      },      {"url": "bufferBefore", "valueDuration": {"value": 15, "unit": "min"}},      {"url": "bufferAfter", "valueDuration": {"value": 15, "unit": "min"}},      {"url": "alignmentInterval", "valueDuration": {"value": 30, "unit": "min"}},      {        "url": "bookingLimit",        "valueTiming": {          "repeat": {"frequency": 3, "period": 1, "periodUnit": "d"}        }      }    ]  }]}
  ```
</Accordion>

<Accordion title="ActivityDefinition: Follow-up Visit">
  This ActivityDefinition defines a 20-minute follow-up visit with 5-minute buffers and 10-minute alignment intervals for more frequent scheduling.

  ```
  {  "resourceType": "ActivityDefinition",  "id": "follow-up-visit",  "status": "active",  "kind": "Appointment",  "code": {    "coding": [{      "system": "http://example.org/appointment-types",      "code": "follow-up",      "display": "Follow-up Visit"    }]  },  "timingDuration": {"value": 20, "unit": "min"},  "extension": [{    "url": "https://medplum.com/fhir/StructureDefinition/SchedulingParameters",    "extension": [      {        "url": "duration",        "valueDuration": {          "value": 1,          "unit": "h"        }      },      {"url": "bufferBefore", "valueDuration": {"value": 5, "unit": "min"}},      {"url": "bufferAfter", "valueDuration": {"value": 5, "unit": "min"}},      {"url": "alignmentInterval", "valueDuration": {"value": 10, "unit": "min"}}    ]  }]}
  ```
</Accordion>

<Accordion title="Schedule: Multi-Service with Overrides">
  This Schedule shows how to configure default availability for all services (Mon-Fri 9am-5pm), then override new patient visits to only be available on Tuesday and Thursday mornings (9am-1pm).

  ```
  {  "resourceType": "Schedule",  "id": "dr-chen-schedule",  "active": true,  "actor": [{"reference": "PractitionerRole/dr-chen"}],  "planningHorizon": {    "start": "2025-01-01T00:00:00Z",    "end": "2025-12-31T23:59:59Z"  },  "extension": [    // Default availability for all services    {      "url": "https://medplum.com/fhir/StructureDefinition/SchedulingParameters",      "extension": [        {          "url": "duration",          "valueDuration": {            "value": 1,            "unit": "h"          }        },        {          "url": "availability",          "valueTiming": {            "repeat": {              "dayOfWeek": ["mon", "tue", "wed", "thu", "fri"],              "timeOfDay": ["09:00:00"],              "duration": 8,              "durationUnit": "h"            }          }        }      ]    },    // New patient visits only on Tuesday and Thursday mornings    {      "url": "https://medplum.com/fhir/StructureDefinition/SchedulingParameters",      "extension": [        {          "url": "serviceType",          "valueCodeableConcept": {            "coding": [{"code": "new-patient-visit"}]          }        },        {          "url": "duration",          "valueDuration": {            "value": 1,            "unit": "h"          }        },        {          "url": "availability",          "valueTiming": {            "repeat": {              "dayOfWeek": ["tue", "thu"],              "timeOfDay": ["09:00:00"],              "duration": 4,              "durationUnit": "h"            }          }        }      ]    }  ]}
  ```
</Accordion>

**Result**:

* **New patient visits (ie. `$find` called with `service-type=new-patient-visit`)**: Tue/Thu 9am-1pm only, 60 minutes, can start every 30 minutes, max 3 per day, 15-min buffers
* **Follow-ups (ie. `$find` called with `service-type=follow-up`)**: Mon-Fri 9am-5pm, 20 minutes, can start every 10 minutes, 5-min buffers

### Example 3: Location-Specific Complex Surgical Scheduling[​](#example-3-location-specific-complex-surgical-scheduling "Direct link to Example 3: Location-Specific Complex Surgical Scheduling")

A bariatric surgery requiring surgeon, OR room, and anesthesiologist coordination.

<Accordion title="ActivityDefinition: Bariatric Surgery">
  This ActivityDefinition defines a 120-minute surgical procedure requiring coordination of surgeon, anesthesiologist, and OR room with 45/30-minute buffers and multiple booking limits (2 per day, 8 per week).

  ```
  {  "resourceType": "ActivityDefinition",  "id": "bariatric-surgery",  "status": "active",  "kind": "Appointment",  "code": {    "coding": [{      "system": "http://snomed.info/sct",      "code": "287809009",      "display": "Bariatric Surgery"    }]  },  "timingDuration": {"value": 120, "unit": "min"},  "participant": [    {      "type": "practitioner",      "role": {        "coding": [{          "system": "http://snomed.info/sct",          "code": "304292004",          "display": "Surgeon"        }]      }    },    {      "type": "practitioner",      "role": {        "coding": [{          "system": "http://snomed.info/sct",          "code": "88189002",          "display": "Anesthesiologist"        }]      }    },    {      "type": "location",      "role": {        "coding": [{          "system": "http://terminology.hl7.org/CodeSystem/v3-RoleCode",          "code": "OR",          "display": "Operating Room"        }]      }    }  ],  "extension": [{    "url": "https://medplum.com/fhir/StructureDefinition/SchedulingParameters",    "extension": [      {        "url": "duration",        "valueDuration": {          "value": 1,          "unit": "h"        }      },      {"url": "bufferBefore", "valueDuration": {"value": 45, "unit": "min"}},      {"url": "bufferAfter", "valueDuration": {"value": 30, "unit": "min"}},      {"url": "alignmentInterval", "valueDuration": {"value": 30, "unit": "min"}},      {        "url": "bookingLimit",        "valueTiming": {          "repeat": {"frequency": 2, "period": 1, "periodUnit": "d"}        }      },      {        "url": "bookingLimit",        "valueTiming": {          "repeat": {"frequency": 8, "period": 1, "periodUnit": "wk"}        }      }    ]  }]}
  ```
</Accordion>

<Accordion title="Schedule: Surgeon Availability">
  This Schedule shows Dr. Martinez's availability for bariatric surgeries, limited to Tuesday and Thursday mornings (8am-4pm).

  ```
  {  "resourceType": "Schedule",  "id": "surgeon-martinez-schedule",  "active": true,  "serviceType": [    {"coding": [{"system": "http://snomed.info/sct", "code": "287809009"}]}  ],  "actor": [{    "reference": "PractitionerRole/surgeon-martinez",    "display": "Dr. Maria Martinez - Bariatric Surgeon"  }],  "extension": [{    "url": "https://medplum.com/fhir/StructureDefinition/SchedulingParameters",    "extension": [      {        "url": "duration",        "valueDuration": {          "value": 1,          "unit": "h"        }      },      {        "url": "availability",        "valueTiming": {          "repeat": {            "dayOfWeek": ["tue", "thu"],            "timeOfDay": ["08:00:00"],            "duration": 8,            "durationUnit": "h"          }        }      }    ]  }]}
  ```
</Accordion>

<Accordion title="Schedule: Operating Room Availability">
  This Schedule shows Operating Room 3's availability for surgical procedures, available weekdays 7am-7pm with extended 12-hour blocks.

  ```
  {  "resourceType": "Schedule",  "id": "or-3-schedule",  "active": true,  "actor": [{    "reference": "Location/or-3",    "display": "Operating Room 3"  }],  "extension": [{    "url": "https://medplum.com/fhir/StructureDefinition/SchedulingParameters",    "extension": [      {        "url": "duration",        "valueDuration": {          "value": 1,          "unit": "h"        }      },      {        "url": "availability",        "valueTiming": {          "repeat": {            "dayOfWeek": ["mon", "tue", "wed", "thu", "fri"],            "timeOfDay": ["07:00:00"],            "duration": 12,            "durationUnit": "h"          }        }      }    ]  }]}
  ```
</Accordion>

<Accordion title="Schedule: Anesthesiologist Availability">
  This Schedule shows Dr. Kim's availability for surgical procedures, covering weekdays 7am-5pm (10-hour blocks).

  ```
  {  "resourceType": "Schedule",  "id": "anesthesiologist-kim-schedule",  "active": true,  "serviceType": [    {"coding": [{"system": "http://snomed.info/sct", "code": "287809009"}]}  ],  "actor": [{    "reference": "PractitionerRole/anesthesiologist-kim",    "display": "Dr. James Kim - Anesthesiologist"  }],  "extension": [{    "url": "https://medplum.com/fhir/StructureDefinition/SchedulingParameters",    "extension": [      {        "url": "duration",        "valueDuration": {          "value": 1,          "unit": "h"        }      },      {        "url": "availability",        "valueTiming": {          "repeat": {            "dayOfWeek": ["mon", "tue", "wed", "thu", "fri"],            "timeOfDay": ["07:00:00"],            "duration": 10,            "durationUnit": "h"          }        }      }    ]  }]}
  ```
</Accordion>

**Result**: When booking a bariatric surgery, the system queries all three schedules, calculates the intersection of availability, and creates atomic transaction bundles to book all required resources simultaneously.

## Location Modeling[​](#location-modeling "Direct link to Location Modeling")

### Location Hierarchy Pattern[​](#location-hierarchy-pattern "Direct link to Location Hierarchy Pattern")

```
Organization (Surgery Center)  └─ Location (Building) [mode=kind]       ├─ Location (Operating Rooms) [mode=kind, type=OR]       │    ├─ Location (OR-1) [mode=instance]       │    ├─ Location (OR-2) [mode=instance]       │    └─ Location (OR-3) [mode=instance]       └─ Location (Recovery Rooms) [mode=kind, type=RR]            ├─ Location (Recovery-A) [mode=instance]            └─ Location (Recovery-B) [mode=instance]
```

### Specific vs. "Any Available" Room[​](#specific-vs-any-available-room "Direct link to Specific vs. \"Any Available\" Room")

**Specific room required:**

* Query `Schedule?actor=Location/or-3`

**Any OR room acceptable:**

* Query: `Schedule?actor:Location.partof:Location.type=OR`

### Best Practices[​](#best-practices "Direct link to Best Practices")

#### 1. Use All-or-Nothing Overrides[​](#1-use-all-or-nothing-overrides "Direct link to 1. Use All-or-Nothing Overrides")

If adding a `serviceType` configuration on Schedule, **specify ALL attributes** to avoid confusion about inheritance.

#### 2. Minimize Pre-Generated Slots[​](#2-minimize-pre-generated-slots "Direct link to 2. Minimize Pre-Generated Slots")

Only create Slot resources for:

* Booked appointments (status: busy)
* Blocked time (status: busy-unavailable)

Let `$find` calculate available windows dynamically.

#### 3. Transaction Bundles for Multi-Resource Booking[​](#3-transaction-bundles-for-multi-resource-booking "Direct link to 3. Transaction Bundles for Multi-Resource Booking")

Always use [FHIR transaction bundles](/docs/fhir-datastore/fhir-batch-requests#batches-vs-transactions) when booking appointments that require multiple resources to ensure atomicity.

[Edit this page](https://github.com/medplum/medplum/blob/main/packages/docs/docs/scheduling/defining-availability.md)

Last updated on **Feb 20, 2026**
